!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e(global);else if("function"==typeof define&&define.amd)define(e(window));else window.stylis=e(window)}(function(e){"use strict";function i(e,C,v,k,w){e+="";var O,y,$,j=w,z="",N="",E=e.charCodeAt(0);if(E<33)E=(e=e.trim()).charCodeAt(0);switch(E){case 35:case 46:N=(z=e).substring(1);break;case 91:if(y=e.substring(1,e.length-1).split("="),O=(N=y[1]||y[0]).charCodeAt(0),34===O||39===O)N=N.substring(1,N.length-1);z="["+y[0]+(y.length>1?'="'+N+'"]':"]");break;default:N=z=e}if(E=0,true===v||void 0===v||null===v)v=true,$=N.replace(p,"-");else $="",v=false;var F,R=void 0!==j&&null!==j,q=l.length;if(true===R)if(F=(typeof j).charCodeAt(0),111===F)t(j);else if(102===F)l[q++]=j;else R=false;if(0!==q)j=1===q?l[0]:r,R=true;var B,D,G,H,I,J,K,L,M,P,Q,S,T,U,V,W,X,Y="",Z="",_="",ee=0,ie=0,te=0,re=0,le=0,fe=0,ne=0,se=0,ae=0,ce=0,oe=0,ge=0,he=0,ue=0,de=0;if(true===R){if(J=j(0,C,me,Ae,z,0),null!=J)C=J;V=""}for(var pe=0,be=0,Ae=0,me=1,xe=C.length,Ce="";pe<xe;){if(ee=C.charCodeAt(pe),1===ie&&pe===xe-1||0===se&&0===ne&&0===he&&(123===ee||125===ee||59===ee||pe===xe-1&&0!==Y.length)){if(Y+=C.charAt(pe),true===R&&125!==ee){if(123===ee)J=j(1,Y.substring(0,Y.length-1).trim(),me,Ae,z,Ce.length);else J=j(2,Y,me,Ae,z,Ce.length);if(null!=J)Y=123===ee?J+" {":J}if(M=Y.charCodeAt(0),32===M)M=(Y=Y.trim()).charCodeAt(0);if(P=Y.charCodeAt(1),Q=Y.charCodeAt(2),64===M){if(1===ge&&0!==_.length){if(ge=0,_=z+" {"+_+"}",true===R)if(J=j(4,_,me,Ae,z,Ce.length),null!=J)_=J;Ce+=_,_=""}if(59!==ee)if(107===P)T=Y.substring(1,11)+$+Y.substring(11),Y="@"+x+T,E=1;else if(109===P&&101===Q||115===P&&117===Q||103===P){if(pe++,Ae++,void 0===W)W="";for(G="",le=1;pe<xe;){if(O=C.charCodeAt(pe),123===O)le++;else if(125===O)le--;if(0===le){pe++;break}G+=C.charAt(pe++),Ae=13===O||10===O?(me++,0):Ae+1}if(e=0===be?z:K.substring(0,K.length-1).replace(h,"").trim(),W+=Y+i(e,G.trim(),v,k,null).trim()+"}",true===R)if(J=j(3,W,me,Ae,z,Ce.length),null!=J)W=J;if(Y="",ie=1,pe===xe)xe++;continue}else E=6;if(59!==ee&&105!==P){if(107!==P&&109!==P&&115!==P&&103!==P)E=5;re=-1,te++}}else{if(123===ee){if(be++,1===ge&&0!==_.length){if(ge=0,_=z+" {"+_+"}",true===R)if(J=j(4,_,me,Ae,z,Ce.length),null!=J)_=J;Ce+=_,_=""}if(2===be){pe++,Ae++,G="";var ve=Y.substring(0,Y.length-1).split(s),ke=K.substring(0,K.length-1).split(s);for(le=1;pe<xe;){if(O=C.charCodeAt(pe),123===O)le++;else if(125===O)le--;if(0===le)break;G+=C.charAt(pe++),Ae=13===O||10===O?(me++,0):Ae+1}q=ke.length;for(var we=0;we<q;we++){J=ke[we],L=J.indexOf(z),ke[we]="";for(var Oe=0,ye=ve.length;Oe<ye;Oe++){if(L>0)e=":global(%)"+J.trim();else e=J.replace(z,"&").trim();if(S=ve[Oe].trim(),S.indexOf(" &")>0)e=S.replace("&","").trim()+" "+e;else if(null!==a.exec(S))e=S;else e=e+" "+S;ke[we]+=e.replace(n,"").trim()+(Oe===ye-1?"":",")}}if(void 0===U)U="";U+="\n"+ke.join(",").replace(c," $1")+" {"+G+"}",fe=1,Y="",be--}else if(0===te||2===E){if(0===ce&&Y.indexOf("::place")!==-1)ce=1;H=Y.split(s),I="",K="",q=H.length;for(var we=0;we<q;we++){if(O=(e=H[we]).charCodeAt(0),32===O)O=(e=e.trim()).charCodeAt(0);if(38===O)e=z+e.substring(1).replace(f,z);else if((L=e.indexOf(" &"))>0)e=e.replace(f,z).trim();else if(58===O)if(X=e.charCodeAt(1),true===k&&104===X&&116===e.charCodeAt(4))if(X=e.charCodeAt(5),40===X)e=z+e.replace(o,"$1").replace(f,z);else if(45===X)e=e.replace(g,"$1 "+z).replace(f,z);else e=z+e.substring(5);else if(103===X&&(true===k||37===(X=e.charCodeAt(8))))ae=1,e=e.replace(a,"$1").replace(f,z).trim();else e=z+e;else if(0===ae)e=z+" "+e;if(true===R)if(J=j(1.5,we===q-1?e.substring(0,e.length-1).trim():e,me,Ae,z,Ce.length),null!=J)e=we===q-1?J+" {":J;K+=(0!==we?",\n":"")+(1!==ae?e:":global(%)"+e),I+=0!==we?","+e:e,ae=0}Y=I}else K=Y}else if(false==(125===ee&&1===Y.length)){if(1===oe)Y=Y.replace(h,"");if(59!==ee)Y=(125===ee?Y.substring(0,Y.length-1):Y.trim())+";";if(97===M&&110===P&&105===Q){if(Y=Y.substring(0,Y.length-1),D=Y.indexOf(":")+1,I=Y.substring(0,D),true===v&&45!==Y.charCodeAt(9)){var $e=Y.substring(D).trim().split(",");q=$e.length;for(var we=0;we<q;we++){for(var je=$e[we],ze=je.split(" "),Oe=0,ye=ze.length;Oe<ye;Oe++){var Ne=ze[Oe].trim(),Ee=Ne.charCodeAt(0),Fe=Ne.charCodeAt(2),Re=Ne.length,qe=Ne.charCodeAt(Re-1);if((Ee>64&&Ee<90||Ee>96&&Ee<122||45===Ee||95===Ee&&95!==Ne.charCodeAt(1))&&41!==qe&&0!==Re&&!(105===Ee&&(102===Fe&&101===qe&&8===Re||105===Fe&&108===qe&&7===Re||104===Fe&&116===qe&&7===Re))&&!(117===Ee&&115===Fe&&116===qe&&5===Re)&&!(108===Ee&&110===Fe&&114===qe&&6===Re)&&!(97===Ee&&116===Fe&&101===qe&&(9===Re||17===Re))&&!(110===Ee&&114===Fe&&108===qe&&6===Re)&&!(98===Ee&&99===Fe&&115===qe&&9===Re)&&!(102===Ee&&114===Fe&&115===qe&&8===Re)&&!(98===Ee&&116===Fe&&104===qe&&4===Re)&&!(110===Ee&&110===Fe&&101===qe&&4===Re)&&!(114===Ee&&110===Fe&&103===qe&&7===Re)&&!(112===Ee&&117===Fe&&100===qe&&6===Re)&&!(114===Ee&&118===Fe&&100===qe&&8===Re)&&!(115===Ee&&101===Fe&&(116===qe&&10===Re||100===qe&&8===Re))&&!(101===Ee&&115===Fe&&(101===qe&&4===Re||(11===Re||7===Re||8===Re)&&45===Ne.charCodeAt(4)))&&isNaN(parseFloat(Ne))&&Ne.indexOf("(")===-1)ze[Oe]=$+Ne}I+=(0===we?"":",")+ze.join(" ").trim()}}else I+=(110!==Y.charCodeAt(10)?"":$)+Y.substring(D).trim().trim();Y=x+I+";"+I+(125===ee?";}":";")}else if(97===M&&112===P&&112===Q)Y=x+Y+A+Y+Y;else if(100===M&&105===P&&115===Q){if((L=Y.indexOf("flex"))!==-1)J=101===Y.charCodeAt(L-2)?"inline-":"",Y=Y.indexOf(" !important")!==-1?" !important":"",Y="display: "+x+J+"box"+Y+";display: "+x+J+"flex"+Y+";display: "+m+"flexbox"+Y+";display: "+J+"flex"+Y+";"}else if(116===M&&(114===P&&97===Q||101===P&&120===Q)){if(Y=x+Y+(102===Y.charCodeAt(5)?m+Y:"")+Y,P+Q===211&&115===Y.charCodeAt(12)&&Y.indexOf(" transform")>-1)Y=Y.substring(0,Y.indexOf(";")+1).replace(b," "+x+"$1")+Y}else if(104===M&&121===P&&112===Q||117===M&&115===P&&101===Q)Y=x+Y+A+Y+m+Y+Y;else if(102===M&&108===P&&101===Q)Y=x+Y+m+Y+Y;else if(111===M&&114===P&&100===Q)Y=x+Y+m+"flex-"+Y+Y;else if(97===M&&108===P&&105===Q&&45===Y.charCodeAt(5))switch(Y.charCodeAt(6)){case 105:J=Y.replace("-items",""),Y=x+Y+x+"box-"+J+m+"flex-"+J+Y;break;case 115:Y=m+"flex-item-"+Y.replace("-self","")+Y;break;default:Y=m+"flex-line-pack"+Y.replace("align-content","")+Y}else if(106===M&&117===P&&115===Q)D=Y.indexOf(":"),J=Y.substring(D).replace("flex-",""),Y=x+"box-pack"+J+x+Y+m+"flex-pack"+J+Y;else if(99===M&&117===P&&114===Q&&null!==/zoo|gra/.exec(Y))Y=Y.replace(d,": "+x)+Y.replace(d,": "+A)+Y;else if(119===M&&105===P&&100===Q&&(L=Y.indexOf("-content"))!==-1)J=Y.substring(L-3),Y="width: "+x+J+"width: "+A+J+"width: "+J;if(59!==ee)if(Y=Y.substring(0,Y.length-1),125===ee)Y+="}"}if(125===ee){if(0!==be)be--;if(0===be&&1===fe)C=C.substring(0,pe+1)+U+C.substring(pe+1),xe+=U.length,U="",fe=0,re++;if(125!==M&&32===Y.charCodeAt(Y.length-2))Y=Y.substring(0,Y.length-1).trim()+"}"}if(0!==te){if(125===ee)re++;else if(123===ee&&0!==re)re--;if(0===re){if(1===E)Y="}@"+T+"}",T="";E=0,re--,te--}else if(1===E)T+=Y}else if(0===be&&125!==ee)ge=1,_=void 0===_?Y:_+Y,Y=""}if(Z+=Y,125===ee&&0===E){if(O=Z.charCodeAt(Z.length-2),123!==O){if(true===R)if(J=j(3,Z,me,Ae,z,Ce.length),null!=J)Z=J;if(1===ce)ce=0,Z=Z.replace(u,"::"+x+"input-place")+Z.replace(u,"::"+A+"place")+Z.replace(u,":"+m+"input-place")+Z;Ce+=Z}Z=""}if(1===ie){if(true===R)if(J=j(3,Z,me,Ae,z,Ce.length),null!=J)W=J;Ce+=W,ie=0,W=""}oe=0,Y=""}else if(13===ee||10===ee){if(1===de)he=de=0,Y=Y.substring(0,Y.indexOf("//")).trim();else if(true===R&&0===he&&0!==(q=(V=V.trim()).length)&&47!==V.charCodeAt(0)){if(0!==Y.length)if(J=j(7,V,me,Ae,z,Ce.length),null!=J)Y=Y.replace(new RegExp(V+"$"),J).trim();V=""}Ae=0,me++}else{if(9!==ee){if(B=C.charAt(pe),true===R&&0===he)V+=B;switch(Y+=B,ee){case 44:if(0===se&&0===he&&0===ne)oe=1,Y+="\n";break;case 34:if(0===he)se=34===se?0:39===se?39:34;break;case 39:if(0===he)se=39===se?0:34===se?34:39;break;case 40:if(0===se&&0===he)ne=1;break;case 41:if(0===se&&0===he)ne=0;break;case 47:if(0===se&&0===ne)if(O=C.charCodeAt(pe-1),0===ue&&47===O)he=de=1;else if(42===O)he=ue=0,Y=Y.substring(0,Y.indexOf("/*")).trim();break;case 42:if(0===se&&0===ne&&0===de&&0===ue)if(47===C.charCodeAt(pe-1))he=ue=1}}Ae++}pe++}if(void 0!==_&&0!==_.length){if(_=z+" {"+_+"}",true===R)if(J=j(4,_,me,Ae,z,Ce.length),null!=J)_=J;Ce+=_}if(true===R)if(J=j(6,Ce,me,Ae,z,Ce.length),null!=J)Ce=J;return Ce}function t(e){var t=l.length;if(null!=e)if(e.constructor===Array)for(var r=0,f=e.length;r<f;r++)l[t++]=e[r];else l[t]=e;return i}function r(e,i,t,r,f,n){for(var s=i,a=0,c=l.length;a<c;a++)s=l[a](e,s,t,r,f,n)||s;if(s!==i)return s}var l=[],f=/&/g,n=/ +&/,s=/,\n/g,a=/:global\(%?((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,c=/(?:&| ):global\(%?((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,o=/:host\((.*)\)/g,g=/:host-context\((.*)\)/g,h=/\n/g,u=/::place/g,d=/: +/g,p=/[ .#~+><\d]+/g,b=/ *(transform)/g,A="-moz-",m="-ms-",x="-webkit-";return i.use=t,i.p=l,i.r={a:f,s:s,g:a,n:c},i});